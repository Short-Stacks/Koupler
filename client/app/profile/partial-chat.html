<div class="ch-box" ng-controller="ChatCtrl as chat">  
  <pre>{{chat.tempMsgStorage}}</pre> 
  <div id="live-chat" ng-show="openConversation">
    <!-- <span ng-repeat="msg in ctrl.messageStorage[ctrl.receiver] track by $index"> -->
    
    <header class="clearfix" ng-click="chat.openClose()">

      <a href="#" class="chat-close">x</a>

      <h4>{{chat.receiverUsername}}</h4>

    </header>

    <div class="chat" ng-show="chat.openChatBox">
      
      <div class="chat-history">
        
        <div class="chat-message clearfix" ng-repeat="content in chat.tempMsgStorage">

          <img src="http://lorempixum.com/32/32/people" alt="" width="32" height="32">
         <!--  <img src="http://gravatar.com/avatar/2c0ad52fc5943b78d6abe069cc08f320?s=32" alt="" width="32" height="32" ng-if="msg[1] == ctrl.receiver">
 -->
          <div class="chat-message-content clearfix">
            
            <span class="chat-time">{{content.created_on | date: "EEE h:mm a"}}</span>
              <h5><strong>{{content.username}}</strong></h5>
              <p class="messageContent">{{content.message}}</p>
          </div> <!-- end chat-message-content -->

        </div> <!-- end chat-message -->

        <hr>


      </div> <!-- end chat-history -->

      <p class="chat-feedback"></p>

      <form>
      <!-- or use<form action="#" method="post"> -->
        <fieldset>
          
          <textarea class="chatInput text" rows="10" type="text" placeholder="Type your messageâ€¦" autofocus ng-model="chat.message"></textarea>
          <input class="chatInput"  width="3" type="button" ng-click="chat.sendMessage()" value="Submit"></input>
        </fieldset>

      </form>

    </div> <!-- end chat -->
  </div> <!-- end live-chat -->
</div>
